function smpInitialise(){smpInitialiseNav();$("ul.smp-planner-list").sortable({handle:".smp-planner-list-meal-drag-handle",isValidTarget:function(n,t){return t.el[0].className.includes("smp-planner-list-meal")},onDrop:function(n,t,i,r){i(n,t,r);let u=n.attr("data-meal");if(typeof u!="undefined"){let f=n.parent("ul").attr("data-day");if(typeof f!="undefined"){let e=parseInt(n.prev("li").attr("data-meal"));$.ajax({url:"/api/planner/"+u+"/move",type:"PUT",data:JSON.stringify({date:f,sortOrderPreviousPlannerMealId:e==NaN?null:e}),contentType:"application/json; charset=utf-8",dataType:"json"})}}}});$(".smp-planner-list-meal-oc").click(function(){$(this).parent("div").next().find(".smp-planner-list-meal-details").toggle()});$(".smp-planner-add-header > span").click(function(){if(!$(this).hasClass("selected")){$(this).parent().children("span.selected").each(function(){$(this).removeClass("selected");let n=$(this).attr("data-select");$(n).hide()});$(this).addClass("selected");let n=$(this).attr("data-select");$(n).show()}});$("textarea.notes").on("change input paste keyup",function(){let t=$(this).val(),n=$(this).data("throttle");typeof n!="undefined"&&clearTimeout(n);$(this).data("throttle",setTimeout(function(){$.ajax({url:"/api/note",type:"PUT",data:JSON.stringify({noteText:t}),contentType:"application/json; charset=utf-8",dataType:"json"})},1e3))});$("form[data-confirm]").submit(function(n){if(!confirm($(this).attr("data-confirm")))return n.preventDefault(),!1})}function smpInitialiseNav(){$(window).resize(function(){$("aside").css("display","");$(".nav-close:visible").length>0&&($(".nav-close").css("display",""),$(".nav-show").css("display",""))});$(".nav-show").click(function(){$("aside").fadeToggle("fast");$(this).hide();$(".nav-close").show()});$(".nav-close").click(function(){$("aside").hide();$(this).hide();$(".nav-show").show()});$("[data-href]").click(function(){window.location.href=$(this).attr("data-href")})}